---
name: docker study template
about: Describe this issue template's purpose here.
title: "도커 컴포즈를 이용한 여러 환경 구성"
labels: "docker"
assignees: "yang"
---

### 📌 1. 정리

#### 배포 환경 차이 해결
- 배포 실패의 주된 원인은 환경 차이
- 도커는 모든 의존 모듈을 패키지에 포함하여 이 문제 해결

#### 도커 컴포즈 프로젝트 관리
- 프로젝트 이름: 도커 컴포즈 파일이 위치한 디렉토리 이름
- 리소스: 도커 컴포즈가 관리하는 컨테이너, 네트워크, 볼륨 등
- 리소스 구분
  - 여러 프로젝트: 프로젝트 이름을 접두사로 사용
  - 같은 서비스의 여러 인스턴스: 1, 2, 3과 같은 증가하는 숫자

#### 오버라이드 파일 활용
- 개발, 테스트, 운영 등 다양한 환경에서 일관된 설정 관리
- 동작 방식
  - 기본 docker-compose.yml 파일에 공통 설정 정의
  - 환경별 오버라이드 파일(docker-compose.override.yml)로 차이점만 관리
- 장점
  - 기본 설정의 일관성 유지
  - 환경별 설정 변경 용이
  - 설정 파일 관리 효율성 증가
  - 실수 방지 및 유지보수 간소화
- 사용방법:
  - docker compose -f [기본파일] -f [오버라이드파일] up 명령으로 설정 병합
  - docker-compose.override.yml 파일이 있으면 자동으로 병합
  - 뒤에 오는 파일이 앞의 파일 설정을 덮어씀

#### 환경 설정 관리
- 환경 변수와 비밀값: env 파일을 통한 설정
- 확장 필드: 중복 설정의 재사용성 제공


---

### 🚀 2. 어려운 점 OR 공유할 점


```bash

x-logging: &logging  
  logging:  
    options:
      max-size: '100m'
      max-file: '10'

x-labels: &labels
  app-name: image-gallery

```

- Docker Compose V2 버전부터는 x-fileds 가 중복으로 선언되는 것이 불가능
- 정확히는 사용할 수는 있지만, 권장 안함
- 유지보수 차원에서 확장 필드를 명확히 분리하는 방식 사용을 권장


---

### 🔍 3. 문제 풀이 공유

#### **📌 문제 설명**

#### **📌 코드 & 풀이 과정**

```bash

```

### 📝 4. 내가 내는 문제

#### 1. 도커 컴포즈의 오버라이드 파일의 주요 목적과 장점은 무엇인가?

<details>
<summary>정답</summary>

##### 주요 목적

- 다양한 환경(개발, 테스트, 운영 등)에서 일관된 설정 관리
- 기본 설정 파일에 공통 설정을 정의하고, 환경별 오버라이드 파일로 차이점만 관리

##### 장점

- 기본 설정의 일관성 유지
- 환경별 설정 변경 용이
- 설정 파일 관리 효율성 증가
- 실수 방지 및 유지보수 간소화
- 오버라이드 파일이 자동으로 병합되어 설정이 간편함
</details>

#### 2. 도커 컴포즈의 config 명령어의 역할은?

<details>
<summary>정답</summary>

##### 주요 역할

- 병합된 설정을 표준 출력으로 보여줌
- 실제 적용될 최종 설정 확인 가능
- 여러 오버라이드 파일이 적용된 후의 결과 미리 확인

</details>
